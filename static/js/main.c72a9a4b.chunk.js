(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(41),c=n.n(o),u=n(17),i=n(5),l=n(1),d=n(9),s=n.n(d),f=n(24),v=n(7),b=n(2),m=n(6),y=n.n(m),p=n(4),g=n.n(p),h=Object(a.createContext)(),E=function(e,t){return Object(b.a)({},e,t)};function O(e){var t=e.children,n=e.currentDay,o=Object(a.useReducer)(E,{currentDay:n||g()()}),c=Object(l.a)(o,2),u={state:c[0],setState:c[1]};return r.a.createElement(h.Provider,{value:u},t)}function j(e){var t=e.children,n=Object(u.a)(e,["children"]);return r.a.createElement(O,n,t)}var k=n(42),T=n.n(k),w=n(43),x=n.n(w);var D=[],S="todos",C="history",F="everyDay",L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],N=Object.freeze(L.reduce(function(e,t,n){return Object(b.a)({},e,Object(v.a)({},t,n))},{})),A=function(e){return N[e]},P=L.map(A);var R=function(){var e=Object(f.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.getItem(C);case 3:if(t=e.sent){e.next=8;break}return e.next=7,y.a.setItem(C,{});case 7:return e.abrupt("return",{});case 8:return e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}();function W(e){var t=g()(e),n=t.year(),a=t.month(),r=t.date();return"".concat(a,"-").concat(r,"-").concat(n)}function I(){return Object(a.useContext)(h)}var M=function(){var e=Object(f.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.getItem(S);case 3:if(t=e.sent){e.next=8;break}return e.next=7,y.a.setItem(S,D);case 7:return e.abrupt("return",D);case 8:return e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}();function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(l.a)(t,2),r=n[0],o=n[1],c=function(e){return r.includes(e)};return{filters:e,currentFilters:r,isFilterActive:c,toggleFilter:function(e){return c(e)?function(e){return o(r.filter(function(t){return t!==e}))}(e):function(e){return o([].concat(Object(i.a)(r),[e]))}(e)},setFilters:function(e){return o(Object.keys(e))}}}var Y=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).day;return Object(v.a)({},"Day",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()().day();return function(t){return t.days.includes(e)}}(e))};var U=n(25),_={allDaysLabel:"All days of the week"};function B(e){var t=e.defaultSelectedDays,n=e.onSetSelectedDays,o=Object(a.useState)(t),c=Object(l.a)(o,2),u=c[0],d=c[1],s=function(e){return u.includes(A(e))},f=P.every(function(e){return u.includes(e)});function v(e){d(e),n(e)}function b(e){var t=e.target,n=N[t.value];v(s(t.value)?u.filter(function(e){return e!==n}):[].concat(Object(i.a)(u),[n]))}return r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Day"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:F,checked:f,onChange:function(){return v(f?[]:P)}}),_.allDaysLabel),"\xa0\u2014\xa0",L.map(function(e){return r.a.createElement("label",{key:e},r.a.createElement("input",{type:"checkbox",value:e,checked:s(e),onChange:b}),e)}))}var H={editLabel:"Edit",saveLabel:"Save",todoTextPlaceholder:"Climb Mt Rainier"};function V(e){var t=e.cancel,n=e.todo,o=e.save,c=e.defaultValue,u=void 0===c?"":c,i=Object(a.useState)(u),d=Object(l.a)(i,2),s=d[0],f=d[1],v=Object(a.useState)(n?n.days:P),b=Object(l.a)(v,2),m=b[0],y=b[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s&&(o({text:s,days:m}),f(""))}},r.a.createElement("label",null,"Todo\xa0",r.a.createElement("input",{autoFocus:!0,type:"text",className:"input",placeholder:H.todoTextPlaceholder,value:s,onChange:function(e){return f(e.target.value)}})),!!s&&r.a.createElement(B,{defaultSelectedDays:m,onSetSelectedDays:y}),r.a.createElement("button",{type:"submit"},H.saveLabel),!!u&&r.a.createElement("button",{onClick:t},"Cancel"))}var z={editLabel:"Edit",deleteLabel:"Remove"},$=function(e){var t=e.text;return"".concat(z.deleteLabel," ").concat(t)},q=function(e){var t=e.text;return"".concat("Mark"," ").concat(t," ").concat("as completed")},G=function(e){var t=e.text;return"Edit ".concat(t)};function K(e){var t=e.isCompleted,n=e.todo,o=e.toggleTodo,c=e.removeTodo,u=e.updateTodo,i=Object(a.useState)(!1),d=Object(l.a)(i,2),s=d[0],f=d[1],v=function(){return f(!1)};return s?r.a.createElement(V,{todo:n,save:function(e){u(Object(b.a)({},n,e)),v()},defaultValue:n.text,cancel:v}):r.a.createElement("div",{style:{textDecoration:t?"line-through":""}},r.a.createElement("input",{"aria-label":q(n),type:"checkbox",checked:t,onChange:o}),n.text,r.a.createElement("div",null,r.a.createElement("button",{"aria-label":G(n),onClick:function(){return f(!0)}},z.editLabel),r.a.createElement("button",{"aria-label":$(n),onClick:function(){return c(n)}},z.deleteLabel)))}function Q(){var e=I().state.currentDay,t=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()();var e=I(),t=e.state,n=e.setState,a=t.currentDay,r=function(e){return n({currentDay:e})};return{goToNextDay:function(){return r(a.add(1,"day"))},goToPreviousDay:function(){return r(a.subtract(1,"day"))},goToToday:function(){return r(g()())}}}(),n=t.goToNextDay,a=t.goToPreviousDay,o=t.goToToday;return r.a.createElement("div",null,r.a.createElement("button",{onClick:a},"Prev"),r.a.createElement("button",{onClick:o},"Today"),e.format("dddd, MMMM Do YYYY"),r.a.createElement("button",{onClick:n},"Next"))}function X(e){var t=e.defaultTodos,n=void 0===t?[]:t,o=e.defaultHistory,c=(e.defaultDay,I().state),d=c.currentDay,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g()(),n=Object(a.useState)(e),r=Object(l.a)(n,2),o=r[0],c=r[1],d=function(){return Y({day:t.get("day")})},s=J(Object.keys(d())),f=s.currentFilters,v=(s.setFilters,Object(u.a)(s,["currentFilters","setFilters"])),m=Object(i.a)(f.map(function(e){return d()[e]})),p=o.filter(function(e){return m.every(function(t){return t(e)})});return Object(a.useEffect)(function(){y.a.setItem(S,o)},[o]),Object(b.a)({todos:p,allTodos:o,updateTodo:function(e){var t=o.map(function(t){return e.id!==t.id?t:Object(b.a)({},t,e)});c(t)},removeTodo:function(e){c(o.filter(function(t){return t!==e}))},toggleTodo:function(e){var t=Object(i.a)(o);t[e].isCompleted=!t[e].isCompleted,c(t)},addTodo:function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){return t+=1,"".concat(e,"_").concat(t)}}("todo",o.length),n=[].concat(Object(i.a)(o),[Object(b.a)({id:t()},e)]);c(n)}},v)}(n,d),f=s.allTodos,m=s.todos,p=s.filters,h=s.toggleFilter,E=s.isFilterActive,O=s.addTodo,j=s.removeTodo,k=s.updateTodo,w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e,n=Object(a.useState)(e),r=Object(l.a)(n,2),o=r[0],c=r[1];Object(a.useEffect)(function(){T()(t,o)||x()(o)||y.a.setItem(C,o)});var u=function(e){return o[e]||[]};return{history:o,isCompletedForDay:function(e,t){return u(W(t)).includes(e)},toggleTodoForDay:function(e,n){var a=W(n);if(a){var r=u(a),l=r.includes(e)?r.filter(function(t){return t!==e}):[].concat(Object(i.a)(r),[e]),d=Object(b.a)({},o,Object(v.a)({},a,l));t=d,c(d)}}}}(o),D=w.history,F=w.toggleTodoForDay,L=w.isCompletedForDay,N=function(e){var t=e.id;return L(t,d)};return r.a.createElement("div",null,r.a.createElement(Q,null),r.a.createElement("div",null,"Filters",p.map(function(e){return r.a.createElement("label",{key:e},e,r.a.createElement("input",{type:"checkbox",checked:E(e),onChange:function(){return h(e)}}))}),r.a.createElement("ul",null,m.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(K,{index:t,todo:e,isCompleted:N(e),toggleTodo:function(){return F(e.id,d)},removeTodo:j,updateTodo:k}))}),r.a.createElement("li",null,r.a.createElement(V,{save:O}))),r.a.createElement("div",{style:{background:"lavender",padding:20,float:"right"}},r.a.createElement("pre",null,"todos: ",JSON.stringify(f,null,2)),r.a.createElement("pre",null,"history: ",JSON.stringify(D,null,2)),r.a.createElement("pre",null,"state: ",JSON.stringify(c,null,2)))))}var Z=Object(U.unstable_createResource)(M),ee=Object(U.unstable_createResource)(R),te=function(){return r.a.createElement("div",null,"Loading...")},ne=function(){var e=Z.read(),t=ee.read();return r.a.createElement(X,{defaultTodos:e,defaultHistory:t})};var ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(function(){return r.a.createElement(j,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement(te,null)},r.a.createElement(ne,null)))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/todo-today",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/todo-today","/service-worker.js");ae?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):re(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):re(t,e)})}}()},44:function(e,t,n){e.exports=n(113)}},[[44,2,1]]]);
//# sourceMappingURL=main.c72a9a4b.chunk.js.map