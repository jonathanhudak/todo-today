(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(41),o=n.n(c),u=n(17),l=n(5),i=n(1),d=n(9),s=n.n(d),f=n(24),v=n(7),b=n(2),m=n(6),y=n.n(m),p=n(4),h=n.n(p),g=Object(a.createContext)(),E=function(e,t){return Object(b.a)({},e,t)};function O(e){var t=e.children,n=e.currentDay,c=Object(a.useReducer)(E,{currentDay:n||h()()}),o=Object(i.a)(c,2),u={state:o[0],setState:o[1]};return r.a.createElement(g.Provider,{value:u},t)}function j(e){var t=e.children,n=Object(u.a)(e,["children"]);return r.a.createElement(O,n,t)}var T=n(42),k=n.n(T),x=n(43),D=n.n(x);var S=[],C="todos",w="history",F="everyDay",L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],I=Object.freeze(L.reduce(function(e,t,n){return Object(b.a)({},e,Object(v.a)({},t,n))},{})),M=function(e){return I[e]},N=L.map(M);var P=function(){var e=Object(f.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.getItem(w);case 3:if(t=e.sent){e.next=8;break}return e.next=7,y.a.setItem(w,{});case 7:return e.abrupt("return",{});case 8:return e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}();function J(e){var t=h()(e),n=t.year(),a=t.month(),r=t.date();return"".concat(a,"-").concat(r,"-").concat(n)}function R(){return Object(a.useContext)(g)}var Y=function(){var e=Object(f.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.getItem(C);case 3:if(t=e.sent){e.next=8;break}return e.next=7,y.a.setItem(C,S);case 7:return e.abrupt("return",S);case 8:return e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}();function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(i.a)(t,2),r=n[0],c=n[1],o=function(e){return r.includes(e)};return{filters:e,currentFilters:r,isFilterActive:o,toggleFilter:function(e){return o(e)?function(e){return c(r.filter(function(t){return t!==e}))}(e):function(e){return c([].concat(Object(l.a)(r),[e]))}(e)},setFilters:function(e){return c(Object.keys(e))}}}var W=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).day;return Object(v.a)({},"Day",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h()().day();return function(t){return t.days.includes(e)}}(e))};var _=n(25),B={allDaysLabel:"All days of the week"};function H(e){var t=e.defaultSelectedDays,n=e.onSetSelectedDays,c=Object(a.useState)(t),o=Object(i.a)(c,2),u=o[0],d=o[1],s=function(e){return u.includes(M(e))},f=N.every(function(e){return u.includes(e)});function v(e){d(e),n(e)}function b(e){var t=e.target,n=I[t.value];v(s(t.value)?u.filter(function(e){return e!==n}):[].concat(Object(l.a)(u),[n]))}return r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Day"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:F,checked:f,onChange:function(){return v(f?[]:N)}}),B.allDaysLabel),"\xa0\u2014\xa0",L.map(function(e){return r.a.createElement("label",{key:e},r.a.createElement("input",{type:"checkbox",value:e,checked:s(e),onChange:b}),e)}))}var V={editLabel:"Edit",saveLabel:"Save",todoTextPlaceholder:"Climb Mt Rainier"};function z(e){var t=e.cancel,n=e.todo,c=e.save,o=e.defaultValue,u=void 0===o?"":o,l=Object(a.useState)(u),d=Object(i.a)(l,2),s=d[0],f=d[1],v=Object(a.useState)(n?n.days:N),b=Object(i.a)(v,2),m=b[0],y=b[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s&&(c({text:s,days:m}),f(""))}},r.a.createElement("label",null,"Todo\xa0",r.a.createElement("input",{autoFocus:!0,type:"text",className:"input",placeholder:V.todoTextPlaceholder,value:s,onChange:function(e){return f(e.target.value)}})),!!s&&r.a.createElement(H,{defaultSelectedDays:m,onSetSelectedDays:y}),r.a.createElement("button",{type:"submit"},V.saveLabel),!!u&&r.a.createElement("button",{onClick:t},"Cancel"))}var $={editLabel:"Edit",deleteLabel:"Remove"},q=function(e){var t=e.text;return"".concat($.deleteLabel," ").concat(t)},G=function(e){var t=e.text;return"".concat("Mark"," ").concat(t," ").concat("as completed")},K=function(e){var t=e.text;return"Edit ".concat(t)};function Q(e){var t=e.isCompleted,n=e.todo,c=e.toggleTodo,o=e.removeTodo,u=e.updateTodo,l=Object(a.useState)(!1),d=Object(i.a)(l,2),s=d[0],f=d[1],v=function(){return f(!1)};return s?r.a.createElement(z,{todo:n,save:function(e){u(Object(b.a)({},n,e)),v()},defaultValue:n.text,cancel:v}):r.a.createElement("div",{style:{textDecoration:t?"line-through":""}},r.a.createElement("input",{"aria-label":G(n),type:"checkbox",checked:t,onChange:c}),n.text,r.a.createElement("div",null,r.a.createElement("button",{"aria-label":K(n),onClick:function(){return f(!0)}},$.editLabel),r.a.createElement("button",{"aria-label":q(n),onClick:function(){return o(n)}},$.deleteLabel)))}function U(){var e=R().state.currentDay,t=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:h()();var e=R(),t=e.state,n=e.setState,a=t.currentDay,r=function(e){return n({currentDay:e})};return{goToNextDay:function(){return r(a.add(1,"day"))},goToPreviousDay:function(){return r(a.subtract(1,"day"))},goToToday:function(){return r(h()())}}}(),n=t.goToNextDay,a=t.goToPreviousDay,c=t.goToToday;return r.a.createElement("div",null,r.a.createElement("button",{onClick:a},"Prev"),r.a.createElement("button",{onClick:c},"Today"),e.format("dddd, MMMM Do YYYY"),r.a.createElement("button",{onClick:n},"Next"))}function X(e){var t=e.defaultTodos,n=void 0===t?[]:t,c=e.defaultHistory,o=(e.defaultDay,R().state),d=o.currentDay,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h()(),n=Object(a.useState)(e),r=Object(i.a)(n,2),c=r[0],o=r[1],d=function(){return W({day:t.get("day")})},s=A(Object.keys(d())),f=s.currentFilters,v=(s.setFilters,Object(u.a)(s,["currentFilters","setFilters"])),m=Object(l.a)(f.map(function(e){return d()[e]})),p=c.filter(function(e){return m.every(function(t){return t(e)})});return Object(a.useEffect)(function(){y.a.setItem(C,c)},[c]),Object(b.a)({todos:p,allTodos:c,updateTodo:function(e){var t=c.map(function(t){return e.id!==t.id?t:Object(b.a)({},t,e)});o(t)},removeTodo:function(e){o(c.filter(function(t){return t!==e}))},toggleTodo:function(e){var t=Object(l.a)(c);t[e].isCompleted=!t[e].isCompleted,o(t)},addTodo:function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){return t+=1,"".concat(e,"_").concat(t)}}("todo",c.length),n=[].concat(Object(l.a)(c),[Object(b.a)({id:t()},e)]);o(n)}},v)}(n,d),f=s.allTodos,m=s.todos,p=s.filters,g=s.toggleFilter,E=s.isFilterActive,O=s.addTodo,j=s.removeTodo,T=s.updateTodo,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e,n=Object(a.useState)(e),r=Object(i.a)(n,2),c=r[0],o=r[1];Object(a.useEffect)(function(){k()(t,c)||D()(c)||y.a.setItem(w,c)});var u=function(e){return c[e]||[]};return{history:c,isCompletedForDay:function(e,t){return u(J(t)).includes(e)},toggleTodoForDay:function(e,n){var a=J(n);if(a){var r=u(a),i=r.includes(e)?r.filter(function(t){return t!==e}):[].concat(Object(l.a)(r),[e]),d=Object(b.a)({},c,Object(v.a)({},a,i));t=d,o(d)}}}}(c),S=x.history,F=x.toggleTodoForDay,L=x.isCompletedForDay,I=function(e){var t=e.id;return L(t,d)};return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement("div",null,"Filters",p.map(function(e){return r.a.createElement("label",{key:e},e,r.a.createElement("input",{type:"checkbox",checked:E(e),onChange:function(){return g(e)}}))}),r.a.createElement("ul",null,m.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(Q,{index:t,todo:e,isCompleted:I(e),toggleTodo:function(){return F(e.id,d)},removeTodo:j,updateTodo:T}))}),r.a.createElement("li",null,r.a.createElement(z,{save:O}))),r.a.createElement("div",{style:{background:"lavender",padding:20,float:"right"}},r.a.createElement("pre",null,"todos: ",JSON.stringify(f,null,2)),r.a.createElement("pre",null,"history: ",JSON.stringify(S,null,2)),r.a.createElement("pre",null,"state: ",JSON.stringify(o,null,2)))))}var Z=Object(_.unstable_createResource)(Y),ee=Object(_.unstable_createResource)(P),te=function(){return r.a.createElement("div",null,"Loading...")},ne=function(){var e=Z.read(),t=ee.read();return r.a.createElement(X,{defaultTodos:e,defaultHistory:t})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(function(){return r.a.createElement(j,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement(te,null)},r.a.createElement(ne,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},44:function(e,t,n){e.exports=n(113)}},[[44,2,1]]]);
//# sourceMappingURL=main.8de94f4e.chunk.js.map