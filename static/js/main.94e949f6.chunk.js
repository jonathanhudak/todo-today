(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(35),o=n.n(c),u=n(37),l=n(3),i=n(1),d=n(9),s=n.n(d),f=n(21),v=n(7),b=n(2),m=n(5),y=n.n(m),p=n(6),g=n.n(p),h=Object(a.createContext)(),E=function(e,t){return Object(b.a)({},e,t)};function O(e){var t=e.children,n=Object(a.useReducer)(E,{currentDay:g()()}),c=Object(i.a)(n,2),o={state:c[0],setState:c[1]};return r.a.createElement(h.Provider,{value:o},t)}function j(e){var t=e.children;return r.a.createElement(O,null,t)}var T=n(36),k=n.n(T);var x=[],D="todos",S="history",C="everyDay",w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],F=Object.freeze(w.reduce(function(e,t,n){return Object(b.a)({},e,Object(v.a)({},t,n))},{})),L=function(e){return F[e]},I=w.map(L);var M=function(){var e=Object(f.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y.a.setItem(S,{}),e.next=4,y.a.getItem(S);case 4:if(t=e.sent){e.next=9;break}return e.next=8,y.a.setItem(S,{});case 8:return e.abrupt("return",{});case 9:return e.abrupt("return",t);case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}();function N(e){var t=g()(e),n=t.year(),a=t.month(),r=t.date();return"".concat(a,"-").concat(r,"-").concat(n)}function P(){return Object(a.useContext)(h)}var R=function(){var e=Object(f.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.getItem(D);case 3:if(t=e.sent){e.next=8;break}return e.next=7,y.a.setItem(D,x);case 7:return e.abrupt("return",x);case 8:return e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}();function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(i.a)(t,2),r=n[0],c=n[1],o=function(e){return r.includes(e)};return{filters:e,currentFilters:r,isFilterActive:o,toggleFilter:function(e){return o(e)?function(e){return c(r.filter(function(t){return t!==e}))}(e):function(e){return c([].concat(Object(l.a)(r),[e]))}(e)},setFilters:function(e){return c(Object.keys(e))}}}var Y=function(e){return[]},A=function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).day;return Object(v.a)({},"Day",(e=t,function(t){return t.days.includes(e||(new Date).getDay())}))};var W=n(22),_={allDaysLabel:"All days of the week"};function B(e){var t=e.defaultSelectedDays,n=e.onSetSelectedDays,c=Object(a.useState)(t),o=Object(i.a)(c,2),u=o[0],d=o[1],s=function(e){return u.includes(L(e))},f=I.every(function(e){return u.includes(e)});function v(e){d(e),n(e)}function b(e){var t=e.target,n=F[t.value];v(s(t.value)?u.filter(function(e){return e!==n}):[].concat(Object(l.a)(u),[n]))}return r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Day"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:C,checked:f,onChange:function(){return v(f?[]:I)}}),_.allDaysLabel),"\xa0\u2014\xa0",w.map(function(e){return r.a.createElement("label",{key:e},r.a.createElement("input",{type:"checkbox",value:e,checked:s(e),onChange:b}),e)}))}var H={editLabel:"Edit",saveLabel:"Save",todoTextPlaceholder:"Climb Mt Rainier"};function V(e){var t=e.cancel,n=e.todo,c=e.save,o=e.defaultValue,u=void 0===o?"":o,l=Object(a.useState)(u),d=Object(i.a)(l,2),s=d[0],f=d[1],v=Object(a.useState)(n?n.days:I),b=Object(i.a)(v,2),m=b[0],y=b[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s&&(c({text:s,days:m}),f(""))}},r.a.createElement("label",null,"Todo\xa0",r.a.createElement("input",{autoFocus:!0,type:"text",className:"input",placeholder:H.todoTextPlaceholder,value:s,onChange:function(e){return f(e.target.value)}})),!!s&&r.a.createElement(B,{defaultSelectedDays:m,onSetSelectedDays:y}),r.a.createElement("button",{type:"submit"},H.saveLabel),!!u&&r.a.createElement("button",{onClick:t},"Cancel"))}var z={editLabel:"Edit",deleteLabel:"Remove"},$=function(e){var t=e.text;return"".concat(z.deleteLabel," ").concat(t)},q=function(e){var t=e.text;return"".concat("Mark"," ").concat(t," ").concat("as completed")},G=function(e){var t=e.text;return"Edit ".concat(t)};function K(e){var t=e.isCompleted,n=e.todo,c=e.toggleTodo,o=e.removeTodo,u=e.updateTodo,l=Object(a.useState)(!1),d=Object(i.a)(l,2),s=d[0],f=d[1],v=function(){return f(!1)};return s?r.a.createElement(V,{todo:n,save:function(e){u(Object(b.a)({},n,e)),v()},defaultValue:n.text,cancel:v}):r.a.createElement("div",{style:{textDecoration:t?"line-through":""}},r.a.createElement("input",{"aria-label":q(n),type:"checkbox",checked:t,onChange:c}),n.text,r.a.createElement("div",null,r.a.createElement("button",{"aria-label":G(n),onClick:function(){return f(!0)}},z.editLabel),r.a.createElement("button",{"aria-label":$(n),onClick:function(){return o(n)}},z.deleteLabel)))}function Q(){var e=P().state.currentDay,t=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()();var e=P(),t=e.state,n=e.setState,a=t.currentDay,r=function(e){return n({currentDay:e})};return{goToNextDay:function(){return r(a.add(1,"day"))},goToPreviousDay:function(){return r(a.subtract(1,"day"))},goToToday:function(){return r(g()())}}}(),n=t.goToNextDay,a=t.goToPreviousDay,c=t.goToToday;return r.a.createElement("div",null,r.a.createElement("button",{onClick:a},"Prev"),r.a.createElement("button",{onClick:c},"Today"),e.format("dddd, MMMM Do YYYY"),r.a.createElement("button",{onClick:n},"Next"))}function U(e){var t=e.defaultTodos,n=void 0===t?[]:t,c=e.defaultHistory,o=(e.defaultDay,P().state),d=o.currentDay,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g()(),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){return t+=1,"".concat(e,"_").concat(t)}}("todo",e.length-1),r=Object(a.useState)(e),c=Object(i.a)(r,2),o=c[0],d=c[1],s=A({day:t.get("day")}),f=J(Object.keys(s)),v=f.currentFilters,m=f.setFilters,p=Object(u.a)(f,["currentFilters","setFilters"]),h=[].concat(Object(l.a)(v.map(function(e){return s[e]})),Object(l.a)(Y(t))),E=o.filter(function(e){return h.every(function(t){return t(e)})});return Object(a.useEffect)(function(){m(A({day:t.get("day")}))},[t]),Object(a.useEffect)(function(){y.a.setItem(D,o)},[o]),Object(b.a)({todos:E,filteredTodos:E,updateTodo:function(e){var t=o.map(function(t){return e.id!==t.id?t:Object(b.a)({},t,e)});d(t)},removeTodo:function(e){d(o.filter(function(t){return t!==e}))},toggleTodo:function(e){var t=Object(l.a)(o);t[e].isCompleted=!t[e].isCompleted,d(t)},addTodo:function(e){var t=[].concat(Object(l.a)(o),[Object(b.a)({id:n()},e)]);d(t)}},p)}(n,d),f=s.todos,m=s.filters,p=s.toggleFilter,h=s.isFilterActive,E=s.addTodo,O=s.removeTodo,j=s.updateTodo,T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e,n=Object(a.useState)(e),r=Object(i.a)(n,2),c=r[0],o=r[1];Object(a.useEffect)(function(){k()(t,c)||y.a.setItem(S,c)});var u=function(e){return c[e]||[]};return{history:c,isCompletedForDay:function(e,t){return u(N(t)).includes(e)},toggleTodoForDay:function(e,n){var a=N(n);if(a){var r=u(a),i=r.includes(e)?r.filter(function(t){return t!==e}):[].concat(Object(l.a)(r),[e]),d=Object(b.a)({},c,Object(v.a)({},a,i));t=d,o(d)}}}}(c),x=T.history,C=T.toggleTodoForDay,w=T.isCompletedForDay,F=function(e){var t=e.id;return w(t,d)};return r.a.createElement("div",null,r.a.createElement(Q,null),r.a.createElement("pre",null,JSON.stringify(x,null,2)),r.a.createElement("pre",null,JSON.stringify(o,null,2)),r.a.createElement("div",null,"Filters",m.map(function(e){return r.a.createElement("label",{key:e},e,r.a.createElement("input",{type:"checkbox",checked:h(e),onChange:function(){return p(e)}}))}),r.a.createElement("ul",null,f.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(K,{index:t,todo:e,isCompleted:F(e),toggleTodo:function(){return C(e.id,d)},removeTodo:O,updateTodo:j}))}),r.a.createElement("li",null,r.a.createElement(V,{save:E})))))}var X=Object(W.unstable_createResource)(R),Z=Object(W.unstable_createResource)(M),ee=function(){return r.a.createElement("div",null,"Loading...")},te=function(){var e=X.read(),t=Z.read();return r.a.createElement(U,{defaultTodos:e,defaultHistory:t})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(function(){return r.a.createElement(j,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement(ee,null)},r.a.createElement(te,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},38:function(e,t,n){e.exports=n(112)}},[[38,2,1]]]);
//# sourceMappingURL=main.94e949f6.chunk.js.map